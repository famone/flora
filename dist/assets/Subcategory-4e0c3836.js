import{o as t,c as s,a as m,d as S,y as v,g as _,t as k,e as d,f as p,w as C,T as x,j as $,F as f,p as y,n as P,v as b,D as B,s as w,u as F,P as V,z as N,A as T}from"./index-3170becd.js";import{P as j,T as D}from"./TitleSkeleton-d9dcfd75.js";import{r as z}from"./ChevronDownIcon-85b68fad.js";function A(o,l){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 4.5l15 15m0 0V8.25m0 11.25H8.25"})])}function L(o,l){return t(),s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[m("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M4.5 19.5l15-15m0 0H8.25m11.25 0v11.25"})])}const M={class:"relative"},q={class:"flex items-center text-gray-500"},E={key:0,class:"absolute w-full z-20 top-8 -right-2 rounded-md drop-shadow-lg overflow-hidden bg-white"},H=["onClick"],G=S({__name:"SortSelect",props:{selectedFilter:{required:!0,type:Number}},emits:["selectFilter"],setup(o,{emit:l}){const c=l,i=o,r=v(!1),e=v([{name:"По умлочанию"},{name:"По возрастанию",icon:L},{name:"По убыванию",icon:A},{name:"По наличию",icon:$}]);function a(n){c("selectFilter",n),r.value=!1}return(n,u)=>(t(),s("div",M,[m("div",q,[_(" Сортировка: "),m("span",{class:"flex items-center ml-1 text-primary_2 cursor-pointer",onClick:u[0]||(u[0]=g=>r.value=!r.value)},[_(k(e.value[i.selectedFilter].name)+" ",1),d(p(z),{class:"h-4 ml-1 mt-1"})])]),d(x,{name:"fade-move"},{default:C(()=>[r.value?(t(),s("div",E,[(t(!0),s(f,null,y(e.value,(g,h)=>(t(),s("div",{key:h,class:P(["px-4 py-2.5 text font-semibold hover:bg-gray-100 cursor-pointer",{"bg-primary_light":i.selectedFilter===h}]),onClick:X=>a(h)},[(t(),b(B(g.icon),{class:"h-4 mr-2 text-gray-500 inline-block"})),_(" "+k(g.name),1)],10,H))),128))])):w("",!0)]),_:1})]))}});function I(){const o=F(),l=v(0);return{changeFilter:r=>{l.value=r},selectedFilter:l,filterProducts:r=>{if(o.catalogSelected){const e=[...r];return l.value===1?e.sort((a,n)=>a.price[o.catalogSelected]-n.price[o.catalogSelected]):l.value===2?e.sort((a,n)=>n.price[o.catalogSelected]-a.price[o.catalogSelected]):l.value===3?e.filter(a=>a.inStock==="instock"):r}else return r}}}const O={class:"flex justify-between items-center mb-6"},U={key:0,class:"col-span-4 text-3xl font-bold"},J={key:0},K={key:0},Q={key:1,class:"grid grid-cols-4 gap-6"},R={key:2,class:"grid grid-cols-4 gap-6"},W=S({__name:"SubcategoryProductsView",props:{title:{},items:{}},setup(o){const{selectedFilter:l,changeFilter:c,filterProducts:i}=I();function r(e){c(e)}return(e,a)=>(t(),s(f,null,[m("div",O,[e.title?(t(),s("h2",U,k(e.title),1)):(t(),b(D,{key:1})),d(G,{"selected-filter":p(l),onSelectFilter:r},null,8,["selected-filter"])]),e.items&&e.items.length?(t(),s("div",J,[p(i)(e.items).length?w("",!0):(t(),s("div",K," Ничего не найдено, согласно параметрам фильтра "))])):w("",!0),e.items&&e.items.length?(t(),s("div",Q,[(t(!0),s(f,null,y(p(i)(e.items),(n,u)=>(t(),s("div",{key:u,class:"col-span-1"},[d(V,{item:n},null,8,["item"])]))),128))])):(t(),s("div",R,[(t(),s(f,null,y(40,n=>m("div",{key:n,class:"col-span-1"},[d(j)])),64))]))],64))}}),te=S({__name:"Subcategory",props:{sub:{type:String,required:!0}},setup(o){const l=F(),c=o,i=v(null),r=()=>{i.value=null,l.LOAD_SUBCAT_SINGLE(c.sub).then(()=>{i.value=l.singleSubcat})};return N(()=>c.sub,()=>{r()}),T(()=>{r()}),(e,a)=>{var n,u;return t(),s("div",null,[d(W,{title:(n=i.value)==null?void 0:n.title,items:(u=i.value)==null?void 0:u.items},null,8,["title","items"])])}}});export{te as default};
